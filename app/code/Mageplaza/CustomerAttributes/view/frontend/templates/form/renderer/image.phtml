<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_CustomerAttributes
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/* @var $block \Mageplaza\CustomerAttributes\Block\Form\Renderer\Image */

$fieldCssClass = 'field field-' . $block->getHtmlId();
$fieldCssClass .= $block->isRequired() ? ' required' : '';
?>
<div class="<?= $block->escapeHtmlAttr($fieldCssClass) ?>">
    <label class="label" for="<?= $block->getHtmlId() ?>">
        <span><?= $block->escapeHtml($block->getLabel()) ?></span>
    </label>
    <div class="control">
        <?php if ($block->getValue()) : ?>
            <a class="preview-link preview-image" href="<?= $block->escapeHtmlAttr($block->getFilePath('image')) ?>"
               target="_blank">
                <img src="<?= $block->escapeHtmlAttr($block->getFilePath('image')) ?>" alt="image">
            </a>
        <?php endif; ?>
        <input type="file" id="<?= $block->getHtmlId() ?>" name="<?= $block->getHtmlId() ?>" class="input-file"
            <?php if ($block->isRequired()) : ?>
            data-validate="{required:true}"
            <?php endif; ?>/>
        <input type="hidden" id="<?= $block->getHtmlId() ?>_value" name="<?= $block->getHtmlId() ?>_value"
               value="<?= /** @noEscape */$block->getEscapedValue() ?>"
            <?php if ($block->isRequired()) : ?>
                data-validate="{required:true}"
            <?php endif; ?>/>
        <?php if ($block->getValue()) : ?>
        <span class="delete-image">
            <input type="checkbox" id="<?= $block->getHtmlId() ?>_delete" name="<?= $block->getHtmlId() ?>[delete]"
                   class="checkbox">
            <label for="<?= $block->getHtmlId() ?>_delete"><?= $block->escapeHtml(__('Delete Image')) ?></label>
        </span>
        <?php endif; ?>
    </div>
</div>
